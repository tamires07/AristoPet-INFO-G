{% load static %}
<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>P√°gina Inicial</title>

    <!-- Incluindo Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous">
    <link rel="icon" href="{% static 'img/icon.ico' %}" type="image/x-icon"/>

    <style>
        body {
            background: #e7e6e3;
            cursor: url("{% static 'img/paw.png' %}"),
            auto;
        }

        p {
            display: flex;
            font-size: 20px;
            justify-content: center;
            align-items: center;
        }

        h2{
            display: flex;
            justify-content: center;
            align-items: center;
            margin-top: 30px;
        }

        a, button, .img-container{
            cursor: url("{% static 'img/pawclick.png' %}"), pointer;
        }

        .card {
            background-color: #ccc3b3;
            color: black;
        }

        .card-img-top {
            height: 200px;
            object-fit: cover;
            cursor: pointer;
        }

        .img-container {
            overflow: hidden;
            height: 200px;
            position: relative;
        }

        .img-container img {
            height: 100%;
            width: 100%;
            object-fit: cover;
            transition: all 0.4s ease;
        }

        .img-container:hover img {
            transform: scale(1.2);
            object-fit: contain;
            width: auto;
            height: 200px;
            transform: scale(1.2);
        }

        .container {
            font-family: 'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif;
            margin-bottom: 20px;
            justify-content: center;
        }

        .col {
            margin-bottom: 50px;
            margin-left: 50px;
            margin-right: 50px;
            
        }

        .historias-section {
        border-top: 3px solid #e1d3be;
        border-bottom: 3px solid #e1d3be;
        }
    
        .carousel-item {
            padding: 20px;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            min-height: 350px;
        }
        
        .carousel-indicators button {
            width: 12px !important;
            height: 12px !important;
            border-radius: 50%;
            background-color: #33605a !important;
        }
        
        .carousel-indicators button.active {
            background-color: #e1d3be !important;
        }
        
        .carousel-control-prev, .carousel-control-next {
            width: 5%;
            color: #33605a;
        }
        
        .carousel-control-prev-icon,
        .carousel-control-next-icon {
            background-color: #33605a;
            border-radius: 50%;
            padding: 15px;
        }
        
        .badge.bg-pink {
            background-color: #ff6b9d !important;
            color: white;
        }
        
        @media (max-width: 768px) {
            .carousel-item .row {
                flex-direction: column;
            }
            .carousel-item .col-md-5 {
                margin-bottom: 20px;
            }
        }
    </style>
</head>

<body class="d-flex flex-column min-vh-100">
    {% include 'partials/header.html' %}

    {% if pessoa %}
        <h2 class="text">Ol√°, {{ pessoa.nome }}! üêæ</h2>
    {% endif %}
    
    <div class="container text-center">
        <h1><b>Bem vindo ao AristoPet</b></h1>
        <p>
            Aqui, cada latido e ronronar pode transformar uma vida. <br>
            Adote um pet, ganhe um amor para toda a vida. <br>

            {% if not user.is_authenticated or request.session.pessoa_id %}
                <section class="historias-section" style="background-color: #f8f9fa;">
                    <div class="container">
                        <div class="text-center">
                            <h2 class="display-5">Conhe√ßa algumas hist√≥rias emocionantes ‚ù§Ô∏è</h2>
                            <p class="lead text-muted mx-auto" style="max-width: 700px;">
                                Cada animal tem uma jornada √∫nica. Conhe√ßa hist√≥rias reais de supera√ß√£o, 
                                amor e segunda chance que v√£o aquecer seu cora√ß√£o.
                            </p>
                        </div>

                        <div id="historiasCarousel" class="carousel slide" data-bs-ride="carousel">
                            <div class="carousel-indicators">
                                <button type="button" data-bs-target="#historiasCarousel" data-bs-slide-to="0" class="active"></button>
                                <button type="button" data-bs-target="#historiasCarousel" data-bs-slide-to="1"></button>
                                <button type="button" data-bs-target="#historiasCarousel" data-bs-slide-to="2"></button>
                                <button type="button" data-bs-target="#historiasCarousel" data-bs-slide-to="3"></button>
                            </div>
                            
                            <div class="carousel-inner">
                                <div class="carousel-item active">
                                    <div class="row align-items-center">
                                        <div class="col-md-5">
                                            <img src="{% static 'img/historia1.jpg' %}" class="d-block w-100 rounded" alt="Thor - Cachorro resgatado" 
                                                onerror="this.src='https://images.unsplash.com/photo-1552053831-71594a27632d?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80'">
                                        </div>
                                        <div class="col-md-7">
                                            <div class="p-4">
                                                <h3 class="text-primary">Thor: Do abandono ao lar amoroso</h3>
                                                <p class="lead">Encontrado em situa√ß√£o de maus-tratos, Thor estava desnutrido e com medo de humanos.</p>
                                                <p>Ap√≥s 3 meses de tratamento e muito amor, ele foi adotado pela fam√≠lia Silva. Hoje, Thor √© o guardi√£o da casa e melhor amigo das crian√ßas.</p>
                                                <div class="mt-4">
                                                    <span class="badge bg-warning text-dark me-2">Resgatado</span>
                                                    <span class="badge bg-success me-2">Adotado</span>
                                                    <span class="badge bg-info">2 anos no novo lar</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="carousel-item">
                                    <div class="row align-items-center">
                                        <div class="col-md-5">
                                            <img src="{% static 'img/historia3.jpg' %}" class="d-block w-100 rounded" alt="Rex - Cachorro idoso" 
                                                onerror="this.src='https://images.unsplash.com/photo-1583337130417-3346a1be7dee?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80'">
                                        </div>
                                        <div class="col-md-7">
                                            <div class="p-4">
                                                <h3 class="text-primary">Rex: A prova de que idade n√£o √© limite</h3>
                                                <p class="lead">Com 10 anos, Rex foi deixado em um abrigo quando seus donos se mudaram.</p>
                                                <p>Passou 8 meses esperando, at√© que um casal de aposentados o viu e se encantou. "Ele nos d√° mais alegria do que podemos retribuir", diz Dona Maria, 68 anos.</p>
                                                <div class="mt-4">
                                                    <span class="badge bg-secondary me-2">Idoso</span>
                                                    <span class="badge bg-success me-2">Adotado</span>
                                                    <span class="badge bg-info">Feliz na aposentadoria</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="carousel-item">
                                    <div class="row align-items-center">
                                        <div class="col-md-5">
                                            <img src="{% static 'img/historia4.jpg' %}" class="d-block w-100 rounded" alt="Mel - Fam√≠lia de gatos" 
                                                onerror="this.src='https://images.unsplash.com/photo-1533738363-b7f9aef128ce?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80'">
                                        </div>
                                        <div class="col-md-7">
                                            <div class="p-4">
                                                <h3 class="text-primary">Mel e seus filhotes: Um final feliz em fam√≠lia</h3>
                                                <p class="lead">Mel foi resgatada gr√°vida das ruas. Deu √† luz 4 filhotes em um abrigo.</p>
                                                <p>A surpresa: uma √∫nica fam√≠lia adotou todos! "N√£o t√≠nhamos coragem de separ√°-los", conta a m√£e adotiva. Hoje, os 5 gatos vivem felizes juntos.</p>
                                                <div class="mt-4">
                                                    <span class="badge bg-pink me-2">Fam√≠lia</span>
                                                    <span class="badge bg-success me-2">Todos adotados</span>
                                                    <span class="badge bg-info">Juntos para sempre</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <button class="carousel-control-prev" type="button" data-bs-target="#historiasCarousel" data-bs-slide="prev">
                                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                <span class="visually-hidden">Anterior</span>
                            </button>
                            <button class="carousel-control-next" type="button" data-bs-target="#historiasCarousel" data-bs-slide="next">
                                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                <span class="visually-hidden">Pr√≥ximo</span>
                            </button>
                        </div>
                    </div>
                </section>
            {% endif %}

            <h2 class="mt-5">Seu novo melhor amigo est√° esperando por voc√™. Adote responsavelmente.</h2>
        </p>
    </div>

    <div class="container text-center">
        <div class="row gx-5">
            {% for animal in animais %}
            <div class="col">
                <div class="card" style="width: 18rem; overflow: hidden;">

                    <div class="img-container">
                        {% if animal.imagem %}
                        <img src="{{ animal.imagem.url }}" class="card-img-top img-clickable" alt="{{ animal.nome }}">
                        {% else %}
                        <img src="https://via.placeholder.com/286x200.png?text=Sem+Imagem" class="card-img-top img-clickable" alt="Sem imagem dispon√≠vel">
                        {% endif %}
                    </div>

                    <div class="card-body">
                        <p class="card-text">
                            Nome: {{ animal.nome }} <br>
                            Esp√©cie: {{ animal.especie }} <br>
                            G√™nero: {{ animal.genero }} <br>
                            Cidade: {{ animal.cidade }}
                        </p>

                        <a href="{% url 'detalheanimal' animal.pk %}" class="btn btn-success">Entrar</a>
                        {% if request.session.pessoa_id == animal.doador.id %}
                            <a href="{% url 'editaranimal' animal.pk %}" class="btn btn-primary">Editar</a>
                            <a href="{% url 'deletaranimal' animal.pk %}" class="btn btn-danger">Excluir</a>
                        {% endif %}
                    </div>
                </div>
            </div>
            {% empty %}
            <p>Nenhum animal cadastrado ainda.</p>
            {% endfor %}
        </div>
    </div>
    

    {% include 'partials/footer.html' %}
    <!-- Incluindo jQuery e Bootstrap JS -->

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.1/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js" integrity="sha384-ndDqU0Gzau9qJ1lfW4pNLlhNTkCfHzAVBReH9diLvGRem5+R9g2FzA8ZGN954O5Q" crossorigin="anonymous"></script>
</body>
</html>